<admintpl file="header" />
<link rel="stylesheet" type="text/css" href="__TMPL__assets/css/chosen/chosen.css"/>
<style type="text/css">
	.amap-layers div{
		width: 500px;
		height: 400px;
	}
</style>
</head>
<body>
	<div class="wrap">
		<ul class="nav nav-tabs">
			<li><a href="{:U('Hotel/rpindex')}">房型RP列表</a></li>
			<li class="active"><a href="javascript:;">编辑客房产品规则</a></li>
		</ul>
		<form method="post" class="form-horizontal js-ajax-form" action="{:U('Hotel/rpedit_post')}">
			<fieldset>
			<h4>基本信息</h4><br>
				<div class="control-group">
					<label class="control-label">客房产品名称</label>
					<div class="controls">
						<input type="hidden" name="id" value="{$roomRP.id}">
						<input type="text" name="RatePlanName" value="{$roomRP.rateplanname}" placeholder="根据客房产品建立相关的名称" style="width:250px;">
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">排序</label>
					<div class="controls">
						<input type="text" name="SortIndex" value="{$roomRP.sortindex}" style="width:80px;">
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">开始时间</label>
					<div class="controls">
						<input type="text" name="StartDate" class="js-date" value="{$startdate}" autocomplete="off" style="width:130px;">
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">结束时间</label>
					<div class="controls">
						<input type="text" class="js-date" name="EndDate" value="{$enddate}" autocomplete="off" style="width:130px;">
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">支付类型</label>
					<div class="controls">
						<input type="radio" id="pay1" name="PaymentType" {$roomRP[paymenttype] == 1 ? "checked" : ""} value="1"><label style="display:initial;" for="pay1">在线预付</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						<input type="radio" id="pay2" name="PaymentType" {$roomRP[paymenttype] == '-1' ? "checked" : ""} value="-1" ><label style="display:initial;" for="pay2">到付</label>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">客房产品状态</label>
					<div class="controls">
						<input type="radio" name="Status" value="1" {$roomRP[status] == 1 ? "checked" : ""} id="status1" value="1"><label style="display:initial;" for="status1">有效</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						<input type="radio" id="status2" name="Status" {$roomRP[status] == '-1' ? "checked" : ""} value="-1"><label for="status2" style="display:initial;">无效</label>
					</div>
				</div>
				<hr/>
				<h4>规则信息</h4><br>
				<div class="control-group">
					<label class="control-label"><h5>服务项目</h5></label>
				</div><br>
				<div class="control-group">
					<label class="control-label" for="bf1">早餐</label>
					<div class="controls">
						<input type="checkbox" id="bf1" class="bfservice" <if condition="$bfservice[1] != '' ">checked</if>>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						<input type="text" style="margin-bottom:5px;width:80px;" name="bfservice[1]" value="{$bfservice[1]}" <if condition="$bfservice[1] == '' ">readonly</if>>元
					</div>
					<label class="control-label" for="bf2">午餐</label>
					<div class="controls">
						<input type="checkbox" id="bf2" class="bfservice" <if condition="$bfservice[2] != '' ">checked</if>>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						<input type="text" style="margin-bottom:5px;width:80px;" name="bfservice[2]" value="{$bfservice[2]}" <if condition="$bfservice[2] == '' ">readonly</if>>元
					</div>
					<label class="control-label" for="bf3">晚餐</label>
					<div class="controls">
						<input type="checkbox" id="bf3" class="bfservice" <if condition="$bfservice[3] != '' ">checked</if>>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						<input type="text" style="margin-bottom:5px;width:80px;" name="bfservice[3]" value="{$bfservice[3]}" <if condition="$bfservice[3] == '' ">readonly</if>>元
					</div>
					<label class="control-label" for="bf4">宽带上网</label>
					<div class="controls">
						<input type="checkbox" id="bf4" class="bfservice" <if condition="$bfservice[4] != '' ">checked</if>>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						<input type="text" style="margin-bottom:5px;width:80px;" name="bfservice[4]" value="{$bfservice[4]}" <if condition="$bfservice[4] == '' ">readonly</if>>元
					</div>
					<label class="control-label" for="bf5">服务费</label>
					<div class="controls">
						<input type="checkbox" id="bf5" class="bfservice" <if condition="!empty($bfservice[5])">checked</if>>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						<input type="text" style="width:80px;" name="bfservice[5]" value="{$bfservice[5]}" <if condition="empty($bfservice[5])">readonly</if>>% 注:每间夜优惠后的%多少
					</div>
				</div>
				<div class="control-group">
					<label class="control-label"><h5>预定项目</h5></label>
				</div><br>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="pric1" name="pricetype" {$roomRP[pricetype] == 1 ? "checked" : ""} value="1" class="pricetype"><label style="display:initial;" for="pric1">按价格优惠</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						<input type="radio" id="pric2" name="pricetype" {$roomRP[pricetype] == '-1' ? "checked" : ""} value="-1" class="pricetype1"><label style="display:initial;" for="pric2">按百分比优惠</label>
					</div>
				</div>
				<div id="jiage" <if condition="$roomRP['pricetype'] eq '-1'">style="display:none"</if>>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="res1" name="reserveitem" {$roomRP[reserveitem] == 1 ? "checked" : ""} value="1" class="reserveitem"><label style="display:initial;" for="res1">平日价，每晚优惠/加价</label>
						<span class="form-required" style="color:red;">(如果想在基础价格上增加费用，可填写负数)</span><br></br>
						<input type="text" name="pricerule[1]" class="reserveitem1" value="{$pricerule[1]}" style="width:80px;" <if condition="empty($pricerule[1])">readonly</if>>元
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="res2" name="reserveitem" {$roomRP[reserveitem] == 2 ? "checked" : ""} value="2" class="reserveitem"><label style="display:initial;" for="res2">提前X天预定，每间优惠</label><br><br>
						<input type="text" name="pricerule[2]" class="reserveitem1" placeholder="提前多少" value="{$pricerule[2]}" style="width:80px;" <if condition="empty($pricerule[2])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[3]" class="reserveitem1" placeholder="每间优惠" value="{$pricerule[3]}" style="width:80px;" <if condition="empty($pricerule[3])">readonly</if>>元
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="res3" name="reserveitem" {$roomRP[reserveitem] == 3 ? "checked" : ""} value="3" class="reserveitem"><label style="display:initial;" for="res3">连住X晚起，每间优惠</label><br><br>
						<input type="text" name="pricerule[4]" class="reserveitem1" placeholder="连住多少" value="{$pricerule[4]}" style="width:80px;" <if condition="empty($pricerule[4])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[5]" class="reserveitem1" placeholder="每间优惠" value="{$pricerule[5]}" style="width:80px;" <if condition="empty($pricerule[5])">readonly</if>>元
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="res4" name="reserveitem" {$roomRP[reserveitem] == 4 ? "checked" : ""} value="4" class="reserveitem"><label style="display:initial;" for="res4">连住X晚起，最后Y晚优惠</label><br><br>
						<input type="text" name="pricerule[6]" class="reserveitem1" placeholder="连住多少" value="{$pricerule[6]}" style="width:80px;" <if condition="empty($pricerule[6])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[7]" class="reserveitem1" placeholder="最后多少" value="{$pricerule[7]}" style="width:80px;" <if condition="empty($pricerule[7])">readonly</if>>晚&nbsp;
						<input type="text" name="pricerule[8]" class="reserveitem1" placeholder="优惠多少" value="{$pricerule[8]}" style="width:80px;" <if condition="empty($pricerule[8])">readonly</if>>元
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="res5" name="reserveitem" {$roomRP[reserveitem] == 5 ? "checked" : ""} value="5" class="reserveitem"><label style="display:initial;" for="res5">连住X晚起，第Y晚及以后优惠</label><br><br>
						<input type="text" name="pricerule[9]" class="reserveitem1" placeholder="连住多少" value="{$pricerule[9]}" style="width:80px;" <if condition="empty($pricerule[9])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[10]" class="reserveitem1" placeholder="第多少" value="{$pricerule[10]}" style="width:80px;" <if condition="empty($pricerule[10])">readonly</if>>晚&nbsp;
						<input type="text" name="pricerule[11]" class="reserveitem1" placeholder="优惠多少" value="{$pricerule[11]}" style="width:80px;" <if condition="empty($pricerule[11])">readonly</if>>元
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="res6" name="reserveitem" {$roomRP[reserveitem] == 6 ? "checked" : ""} value="6" class="reserveitem"><label style="display:initial;" for="res6">连住X晚起，最后Y晚优惠</label><br><br>
						<input type="text" name="pricerule[12]" class="reserveitem1" placeholder="每连住多少" value="{$pricerule[12]}" style="width:80px;" <if condition="empty($pricerule[12])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[13]" class="reserveitem1" placeholder="最后多少" value="{$pricerule[13]}" style="width:80px;" <if condition="empty($pricerule[13])">readonly</if>>晚&nbsp;
						<input type="text" name="pricerule[14]" class="reserveitem1" placeholder="优惠多少" value="{$pricerule[14]}" style="width:80px;" <if condition="empty($pricerule[14])">readonly</if>>元
					</div>
				</div><hr>
				</div>
				<div id="baifenbi" <if condition="$roomRP['pricetype'] eq '1'">style="display:none"</if>>
					<div class="control-group">
					<div class="controls">
						<input type="radio" id="tem1" name="reserveitem" {$roomRP[reserveitem] == '-1' ? "checked" : ""} value="-1" class="reserveitem"><label style="display:initial;" for="tem1">平日价，每晚优惠/加价</label>
						<span class="form-required" style="color:red;">(如果想在基础价格上增加费用，可填写负数)</span><br></br>
						<input type="text" name="pricerule[-1]" class="reserveitem1" value="{$pricerule[-1]}" style="width:80px;" <if condition="empty($pricerule[-1])">readonly</if>>%
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="tem2" name="reserveitem" {$roomRP[reserveitem] == '-2' ? "checked" : ""} value="-2" class="reserveitem"><label style="display:initial;" for="tem2">提前X天预定，每间优惠</label><br><br>
						<input type="text" name="pricerule[-2]" class="reserveitem1" placeholder="提前多少" value="{$pricerule[-2]}" style="width:80px;" <if condition="empty($pricerule[-2])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[-3]" class="reserveitem1" placeholder="每间优惠" value="{$pricerule[-3]}" style="width:80px;" <if condition="empty($pricerule[-3])">readonly</if>>%
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="tem3" name="reserveitem" {$roomRP[reserveitem] == '-3' ? "checked" : ""} value="-3" class="reserveitem"><label style="display:initial;" for="tem3">连住X晚起，每间优惠</label><br><br>
						<input type="text" name="pricerule[-4]" class="reserveitem1" placeholder="连住多少" value="{$pricerule[-4]}" style="width:80px;" <if condition="empty($pricerule[-4])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[-5]" class="reserveitem1" placeholder="每间优惠" value="{$pricerule[-5]}" style="width:80px;" <if condition="empty($pricerule[-5])">readonly</if>>%
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="tem4" name="reserveitem" {$roomRP[reserveitem] == '-4' ? "checked" : ""} value="-4" class="reserveitem"><label style="display:initial;" for="tem4">连住X晚起，最后Y晚优惠</label><br><br>
						<input type="text" name="pricerule[-6]" class="reserveitem1" placeholder="连住多少" value="{$pricerule[-6]}" style="width:80px;" <if condition="empty($pricerule[-6])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[-7]" class="reserveitem1" placeholder="最后多少" value="{$pricerule[-7]}" style="width:80px;" <if condition="empty($pricerule[-7])">readonly</if>>晚&nbsp;
						<input type="text" name="pricerule[-8]" class="reserveitem1" placeholder="优惠多少" value="{$pricerule[-8]}" style="width:80px;" <if condition="empty($pricerule[-8])">readonly</if>>%
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="tem5" name="reserveitem" {$roomRP[reserveitem] == '-5' ? "checked" : ""} value="-5" class="reserveitem"><label style="display:initial;" for="tem5">连住X晚起，第Y晚及以后优惠</label><br><br>
						<input type="text" name="pricerule[-9]" class="reserveitem1" placeholder="连住多少" value="{$pricerule[-9]}" style="width:80px;" <if condition="empty($pricerule[-9])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[-10]" class="reserveitem1" placeholder="第多少" value="{$pricerule[-10]}" style="width:80px;" <if condition="empty($pricerule[-10])">readonly</if>>晚&nbsp;
						<input type="text" name="pricerule[-11]" class="reserveitem1" placeholder="优惠多少" value="{$pricerule[-11]}" style="width:80px;" <if condition="empty($pricerule[-11])">readonly</if>>%
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
						<input type="radio" id="tem6" name="reserveitem" {$roomRP[reserveitem] == '-6' ? "checked" : ""} value="-6" class="reserveitem"><label style="display:initial;" for="tem6">连住X晚起，最后Y晚优惠</label><br><br>
						<input type="text" name="pricerule[-12]" class="reserveitem1" placeholder="每连住多少" value="{$pricerule[-12]}" style="width:80px;" <if condition="empty($pricerule[-12])">readonly</if>>天&nbsp;
						<input type="text" name="pricerule[-13]" class="reserveitem1" placeholder="最后多少" value="{$pricerule[-13]}" style="width:80px;" <if condition="empty($pricerule[-13])">readonly</if>>晚&nbsp;
						<input type="text" name="pricerule[-14]" class="reserveitem1" placeholder="优惠多少" value="{$pricerule[-14]}" style="width:80px;" <if condition="empty($pricerule[-14])">readonly</if>>%
					</div>
				</div><hr>
				</div>
				<h4>使用房型</h4><br>
				<div class="control-group">
					<div class="controls">
						<foreach name="roomArr" item="vo">
							<input type="checkbox" id="room[{$vo.id}]" name="roomid[]" <if condition="$tmp[$vo['id']]">checked</if> value="{$vo['id']}"><label style="display:initial;" for="room[{$vo.id}]">{$vo.room_name}</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</foreach>
					</div>
				</div>
			</fieldset>
			<div class="form-actions">
				<button type="submit" class="btn btn-primary js-ajax-submit">更新</button>
				<a class="btn" href="{:U('Hotel/rpindex')}">返回</a>
			</div>
		</form>
	</div>
	<script type="text/javascript" src="__PUBLIC__/js/common.js"></script>
	<script type="text/javascript" src="__PUBLIC__/js/content_addtop.js"></script>
	<script src="__PUBLIC__/js/chosen/chosen_jquery_min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		$(".bfservice").on("click", function (){ 
			var bfservice1 = $(this);
				if(bfservice1[0].checked){ 
					bfservice1.next().attr("readonly",false);
				}else{ 
					bfservice1.next().attr("readonly",true);
				}
		});
		$(".reserveitem").on("click",function(){ 
			$(".reserveitem1").attr("readonly",true);
			var reserveitem1 = $(this);
			if(reserveitem1[0].checked){ 
				reserveitem1.nextAll().attr("readonly",false);
			}
		})
		$(".pricetype").on("click",function(){
			var pricetype = $(this);
			if(pricetype[0].checked){ 
				$("#baifenbi").hide();
				$("#jiage").show();
			}
		})
		$(".pricetype1").on("click",function(){
			var pricetype = $(this);
			if(pricetype[0].checked){ 
				$("#jiage").hide();
				$("#baifenbi").show();
			}
		})
	</script>
</body>
</html>