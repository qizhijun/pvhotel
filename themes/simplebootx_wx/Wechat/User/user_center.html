<html ng-app="HotelmApp" class="ng-scope">

	<head>
		<style type="text/css">
			@charset "UTF-8";
			[ng\:cloak],
			[ng-cloak],
			[data-ng-cloak],
			[x-ng-cloak],
			.ng-cloak,
			.x-ng-cloak,
			.ng-hide:not(.ng-hide-animate) {
				display: none !important;
			}
			
			ng\:form {
				display: block;
			}
		</style>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no, initial-scale=1">
		<meta content="telephone=no,email=no" name="format-detection">
		<title ng-bind="hotel_basic_info.hname" class="ng-binding">电谷国际酒店</title>
		<!--<link href="/webapp/css/all.css?v=4.0" rel="stylesheet" />-->
		<link href="__TMPL__Public/css/all.css?v=4.77" rel="stylesheet">
		<link href="__TMPL__Public/css/gong.css" rel="stylesheet">
		<script src="//hm.baidu.com/hm.js?f9aee954c7251b95c429cb15f68c4a8a"></script>
		
		<script src="__TMPL__Public/js/index.js?v=11.14" async=""></script>

	</head>

	<body>

		<div id="style_val_h">
			<link href="__TMPL__Public/css/style.css" rel="stylesheet">
		</div>
		<div class="header bg_color_blue1 " style="width: 100%; transform-origin: 0px 0px 0px; opacity: 1; transform: scale(1, 1);" id="div_top_bar">
			<i class="back lt "></i>
			<i class="menu rt"></i>
			<div class="title color_white1 f22 lt">个人中心</div>
		</div>

		<include file="./themes/simplebootx_wx/Wechat/link.html" />
		<!-- ngView:  -->
		<div id="main_main" ng-view="" class="ng-scope">
			<style class="ng-scope">
				.maincontent {
					padding-bottom: 20px;
					padding-top: 52px;
				}
				
				.content_pinfo1 {
					width: 100%;
					padding: 17px 0 0px;
					margin-bottom: 8px;
					background-color: #22bcf0;
					text-align: center;
				}
				
				.content_pinfo1 span {
					display: block;
				}
				
				.pinfo_headimg {
					width: 100px;
					height: 100px;
					border-radius: 50px;
					display: block;
					margin: 0 auto 5px;
				}
				
				.pinfo_sign {
					width: 100px;
					height: 30px;
					line-height: 30px;
					border-radius: 15px;
					padding-left: 50px;
					margin: 5px auto 0px;
					box-sizing: border-box;
					text-align: left;
					position: relative;
				}
				
				.pinfo_sign .pinfo_circle {
					position: absolute;
					width: 26px;
					height: 26px;
					border-radius: 13px;
					background-color: #ffe7a1;
					left: 8px;
					top: 2px;
				}
				
				.pinfo_sign .pinfo_circle span.pinfo_circle_num {
					width: 20px;
					height: 20px;
					line-height: 20px;
					border-radius: 10px;
					background-color: #ffba34;
					text-align: center;
					margin-left: 3px;
					margin-top: 3px;
				}
				
				.pinfo_sign .pinfo_circle .pinfo_circle_num1 {
					position: absolute;
					left: 1px;
					bottom: -21px;
					opacity: 0;
				}
				
				.pinfo_sign .pinfo_circle .pinfo_circle_num1 span {
					display: inline;
				}
				
				.pinfo_top_nav {
					display: -webkit-box;
					background-color: rgba(0, 0, 0, 0.2);
					height: 58px;
					padding-top: 12px;
					margin-top: 15px;
				}
				
				.pinfo_top_nav li {
					-webkit-box-flex: 1;
				}
				
				.content_container1 {
					margin-bottom: 8px;
				}
				
				.content_container1 p {
					height: 40px;
					line-height: 40px;
				}
				
				.content_container1_nav {
					overflow: hidden;
					margin-left: -3%;
					margin-right: -3%;
					border-top-width: 1px;
				}
				
				.content_container1_nav li {
					white-space: nowrap;
					float: left;
					width: 25%;
					text-align: center;
					padding-top: 15px;
					padding-bottom: 15px;
					border-right-width: 1px;
					box-sizing: border-box;
				}
				
				.content_container1_nav li i {
					width: 30px;
					height: 30px;
					margin: 0 auto 6px;
					display: block;
					background-image: url(__TMPL__Public/img/bg_mem.png);
				}
				
				.content_container1_nav li i.icon_roomorder {
					background-position: -4px -8px;
				}
				
				.content_container1_nav li i.icon_resorder {
					background-position: -61px -8px;
				}
				
				.content_container1_nav li i.icon_sportsorder {
					background-position: -117px -8px;
				}
				
				.content_container1_nav li i.icon_meetingorder {
					background-position: -170px -8px;
				}
				
				.content_container1_nav li i.icon_point {
					background-position: -3px -47px;
				}
				
				.content_container1_nav li i.icon_coupon {
					background-position: -62px -47px;
				}
				
				.content_container1_nav li i.icon_payrecord {
					background-position: -116px -47px;
				}
				
				.content_container1_nav li i.icon_memcz {
					background-position: -175px -47px;
				}
				
				.content_container1_nav li i.icon_xym {
					background-position: -5px -92px;
				}
				
				.content_container1_nav li i.icon_pwd {
					background-position: -61px -92px;
				}
				
				.content_container1_nav li i.icon_mobile {
					background-position: -115px -92px;
				}
				
				.content_container1_nav li i.icon_info {
					background-position: -179px -92px;
				}
				
				.content_container1_nav li i.icon_zfpwd {
					background-position: -231px -92px;
				}
				
				.content_container1_nav li i.icon_memclub {
					background-position: -9px -134px;
				}
				
				.content_container1_nav li i.icon_memrule {
					background-position: -61px -134px;
				}
				
				.content_container1_nav li i.icon_memlian {
					background-position: -118px -134px;
				}
				
				.content_container1_nav li i.icon_memsales {
					background-position: -178px -131px;
				}
				
				.content_container1_nav li i.icon_bindwx {
					background-position: -222px -7px;
				}
				
				#pop {
					position: fixed;
					top: 50%;
					left: 50%;
					margin-left: -50%;
				}
				
				.longbtn {
					margin-bottom: 10px;
					margin-left: 98px;
				}
				
				.mor {
					width: 6px;
					height: 10px;
					border-width: 2px;
					border-style: solid;
					border-color: transparent #2397D0 #2397D0 transparent;
					transform: rotate(45deg);
					float: right;
					position: relative;
					bottom: 3px;
					right: 5px;
					z-index: 999;
					margin-top: 3px;
				}
				
				.tipcontainer {
					position: fixed;
					width: 60%;
					margin-left: -200%;
					left: 50%;
					top: 50%;
					margin-top: -70px;
					z-index: 101;
					height: 141px;
					border-radius: 5px;
				}
				
				.tiptext {
					position: relative;
					top: 60px;
					left: 27%;
				}
				
				.ring {
					width: 20px;
					height: 20px;
					border-radius: 20px;
					border: #2397D0;
					border-width: 1px;
					border-style: solid;
					position: relative;
					top: 60px;
					left: 25%;
				}
				
				.login {
					background-position: -235px -227px;
					background-color: #e1dfdf;
					width: 80px;
					height: 80px;
					border-radius: 40px;
					display: block;
					margin: 0 auto 5px;
					overflow: hidden;
				}
				
				.login img {
					width: 100%;
				}
				
				.pinfo_left_headimg {
					max-width: 75px;
					max-height: 75px;
					min-height: 70px;
				}
				
				.pinfo_quitbtn {
					height: 46px;
					line-height: 46px;
					text-align: center;
					display: block;
					margin-top: 20px;
				}
				
				#div_footer_item {
					display: none !important;
				}
			</style>
			<div class="maincontent bg_color_gray2 ng-scope">
				<div class="content_pinfo1 w98 bg_color_blue1">
					<div class="color_white1" style="position: relative;">
						<if condition="$fans['headimgurl']">
							<img class="pinfo_headimg ng-isolate-scope imguplode" lazy-src="{$fans['headimgurl']}" onerror="this.src='{$fans['headimgurl']}'" alt="" src="{$fans['headimgurl']}" style="opacity: 1;">
						<else />
							<img class="pinfo_headimg ng-isolate-scope imguplode" lazy-src="__TMPL__Public/img/mem.png" onerror="this.src='__TMPL__Public/img/mem.png'" alt="" src="__TMPL__Public/img/mem.png" style="opacity: 1;">
						</if>
						<input type="hidden" name="headimgurl" id="headimgurl">
						<!--<input style="width: 100%; opacity: 0; position: absolute; left: 0; top: 0; width: 100%; height: 105px" id="headimg" type="file" onclick="imgUplode(this)" accept="image/*" ng-if="loginInfo.cid>0" class="ng-scope">-->
						<php>$nickname = urldecode($fans['nickname']);</php>
						<div ng-if="loginInfo.cid>0" class="ng-scope">
							<if condition="$nickname">
								<span class="pinfo_name f20  ng-binding" onclick="pop(2)">{$nickname}</span>
							<else />
								<span class="pinfo_name f20  ng-binding" onclick="pop(2)">点击修改</span>
							</if>
						</div>
						
					</div>
					<ul class="pinfo_top_nav color_white1 f16">
						<li>
							<span class="f24 ng-binding" ng-bind="member.pointPoolValue">0</span>
							<label>我的积分</label>
						</li>
						<li>
							<span class="f24 ng-binding" ng-bind="member.couponNum">0</span>
							<label>可用优惠券</label>
						</li>
						<li>
							<span class="f24">0</span>
							<label>账户余额</label>
						</li>
					</ul>
				</div>
				<div class="content_container1 bg_color_white1 w98 color_black2 f16">
					<p class="f18">订单管理</p>
					<!-- ngIf: loginInfo.cguid != '' || unlogin.mobile != '' -->
					<ul class="content_container1_nav border_color_gray1 ng-scope" ng-if=" loginInfo.cguid != '' || unlogin.mobile != '' ">
						<a href="{:U('User/roomorder')}" style="color:#333;">
							<li class="border_color_gray1" ng-click="go_url('/member/orderlist?type=1')">
								<i class="icon_roomorder"></i>
								<label>客房订单</label>
							</li>
						</a>
						<a href="{:U('User/cyorder')}" style="color:#333;">
							<li class="border_color_gray1" ng-click="go_url('/member/orderlist?type=2')">
								<i class="icon_resorder"></i>
								<label>餐饮订单</label>
							</li>
						</a>
						<a href="{:U('User/ylorder')}" style="color:#333;">
							<li class="border_color_gray1" ng-click="go_url('/member/orderlist?type=4')">
								<i class="icon_sportsorder"></i>
								<label>康体订单</label>
							</li>
						</a>
						<a href="{:U('User/hyorder')}" style="color:#333;">
							<li ng-click="go_url('/member/orderlist?type=3')">
								<i class="icon_meetingorder"></i>
								<label>会议订单</label>
							</li>
						</a>
					</ul>
					<!-- end ngIf: loginInfo.cguid != '' || unlogin.mobile != '' -->
					<!-- ngIf: !(loginInfo.cguid != '' || unlogin.mobile != '') -->
				</div>
				<div class="content_container1 bg_color_white1 w98 color_black2 f16">
					<p class="f18">我的账户</p>
					<!-- ngIf: loginInfo.cid>0 -->
					<ul class="content_container1_nav border_color_gray1 ng-scope" ng-if="loginInfo.cid>0">
						<a href="{:U('User/jifen')}" style="color:#333;">
						<li class="border_color_gray1" ng-click="go_url('/member/pointlog')">
							<i class="icon_point"></i>
							<label>积分</label>
						</li>
						</a>
						<!--<li class="border_color_gray1" ng-click="go_url('/member/couponlist')">
							<i class="icon_coupon"></i>
							<label>优惠券</label>
						</li>-->
						<a href="{:U('User/paylist')}" style="color:#333;">
						<li class="border_color_gray1" ng-click="go_url('/member/paylog')">
							<i class="icon_payrecord"></i>
							<label>付款记录</label>
						</li>
						</a>
						<!-- ngIf: 1==2 -->
					</ul>
					<!-- end ngIf: loginInfo.cid>0 -->
					<!-- ngIf: loginInfo.cid<=0 -->
				</div>
				<div class="content_container1 bg_color_white1 w98 color_black2 f16">
					<p class="f18">账户设置</p>
					<!-- ngIf: loginInfo.cid>0 -->
					<ul class="content_container1_nav border_color_gray1 ng-scope" ng-if="loginInfo.cid>0">
						<!--<li class="border_color_gray1" ng-click="go_url('/member/bdprotocolcode')">
							<i class="icon_xym"></i>
							<label>协议码</label>
						</li>-->
						<!--<li class="border_color_gray1" ng-click="go_url('/member/changeotherinfo?type=1')" onclick="pop(1)">
							<i class="icon_pwd"></i>
							<label>修改密码</label>
						</li>-->
						<!-- ngIf: mobile!='' -->
						<li class="border_color_gray1 ng-scope" ng-if="mobile!=''" ng-click="go_url('/member/changeotherinfo?type=2')" onclick="pop(0)">
							<i class="icon_mobile"></i>
							<label>修改手机</label>
						</li>
						<!-- end ngIf: mobile!='' -->
						<!-- ngIf: mobile=='' -->
						<a href="{:U('User/member')}" style="color:#000000;">
							<li class="border_color_gray1 ng-scope" ng-if="mobile!=''" ng-click="go_url('/member/changeotherinfo?type=2')" onclick="pop(0)">
								<i class="icon_info"></i>
								<label>完善资料</label>
							</li>
						</a>
						<a href="{:U('User/changxiao')}" style="color:#333;">
						<li class="border_color_gray1 ng-scope" ng-if="member.marketID==0" ng-click="go_url('/integratingmkt/fillinformation')">
							<i class="icon_memsales"></i>
							<label>全员营销</label>
						</li>
						</a>
					</ul>
					<!--<ul class="content_container1_nav border_color_gray1 ng-scope" ng-if="loginInfo.cid>0">
						
					</ul>-->
				</div>
				<!--<div class="content_container1 bg_color_white1 w98 color_black2 f16">
					<p class="f18">会员服务</p>
					<ul class="content_container1_nav border_color_gray1">
						<li class="border_color_gray1" ng-click="go_url('/hotel/cardlist')">
							<i class="icon_memrule"></i>
							<label>会员规则</label>
						</li>
						<li class="border_color_gray1 ng-scope" ng-if="hotel_basic_info.zhidingalliance>0" ng-click="go_alliance()">
							<i class="icon_memlian"></i>
							<label class="ng-binding">酒店联盟</label>
						</li>
					</ul>
				</div>-->
			</div>
			<div id="pop" class="w98 popcontainer ng-scope" style="margin-top: -408.5px; top: -410.5px;">
				<div class="color_black2 bg_color_white1 w98">
					<h3 class="f18 color_black1 bg_color_white1 poptitle border_color_gray1">修改手机 <span class="close " onclick="pop_func()"></span></h3>
					<div style="line-height: 30px; height: 23px; margin-top: 4px;">
						<p class="lt poplabel " style="position: relative; top: 0">原始手机:</p>
						<input type="hidden" id="NewPhone" value="{$phone}">
						<span class="lt ng-binding">{$phoneA}</span>
						<div class="clear"></div>
					</div>
					<div class="popinputcontainer border_color_gray1" style="border-bottom-width: 1px; padding-bottom: 12px;">
						<p class="lt poplabel">验证码:</p>
						<input class="lt border_color_gray1 popinput" type="text" id="oldyzm" style="width:100px;">
						<span class="bg_color_blue2 color_white1 btngetvcode " id="yzm0" ng-click="GetYzm(0)">获取验证码</span>
						<div class="clear"></div>
					</div>

					<div class="popinputcontainer">
						<p class="lt poplabel">新手机:</p>
						<input class="lt border_color_gray1 popinput" type="tel" maxlength="11" id="newTel" value="">
						<div class="clear"></div>
					</div>
					<div class="popinputcontainer">
						<p class="lt poplabel">验证码:</p>
						<input class="lt border_color_gray1 popinput" type="text" id="newyzm" style="width:100px;" value="">
						<span class="bg_color_blue2 color_white1 btngetvcode" id="yzm1" ng-click="GetYzm(1)">获取验证码</span>
						<div class="clear"></div>
					</div>
					<span class="rt bg_color_blue2 color_white1  longbtn " ng-click="changeTel()" id="btnTel">确认</span>
					<div class="clear"></div>
				</div>

				<div class="color_black2 bg_color_white1 w98" style="display: none">
					<h3 class="f18 color_black1 bg_color_white1 poptitle border_color_gray1">修改密码 <span class="close " onclick="pop_func()"></span></h3>
					<div class=" popinputcontainer">
						<p class="lt poplabel">原始密码:</p>
						<input class="lt border_color_gray1 popinput" type="password" id="oldpwd">
						<div class="clear"></div>
					</div>

					<div class=" popinputcontainer">
						<p class="lt poplabel">新密码:</p>
						<input class="lt border_color_gray1 popinput" type="password" id="newpwd" maxlength="16">
						<div class="clear"></div>
					</div>
					<div class="popinputcontainer">
						<p class="lt poplabel">确认密码:</p>
						<input class="lt border_color_gray1 popinput" type="password" id="compwd">
						<div class="clear"></div>
					</div>
					<span class="rt bg_color_blue2 color_white1  longbtn " ng-click="changePwd()" id="btnPwd">确认</span>
					<div class="clear"></div>
				</div>
				<div class="color_black2 bg_color_white1 w98" style="display: none">
					<h3 class="f18 color_black1 bg_color_white1 poptitle border_color_gray1">修改用户名 <span class="close " onclick="pop_func()"></span></h3>
					<div class=" popinputcontainer">
						<p class="lt poplabel">用户名:</p>
						<input class="lt border_color_gray1 popinput" type="text" id="txtNick" value="">
						<div class="clear"></div>
					</div>

					<span class="rt bg_color_blue2 color_white1  longbtn " ng-click="changeNick()" id="btnNick">确认</span>
					<div class="clear"></div>
				</div>
				<div class="color_black2 bg_color_white1 w98">
					<h3 class="f18 color_black1 bg_color_white1 poptitle border_color_gray1">修改手机 <span class="close " onclick="pop_func()"></span></h3>
					<div class="popinputcontainer">
						<p class="lt poplabel">手机号:</p>
						<input class="lt border_color_gray1 popinput" type="tel" maxlength="11" id="telnew">
						<div class="clear"></div>
					</div>
					<div class="popinputcontainer">
						<p class="lt poplabel">验证码:</p>
						<input class="lt border_color_gray1 popinput" type="text" id="telnewcode">
						<span class="bg_color_blue2 color_white1 btngetvcode" id="yzm2" ng-click="GetYzm(2)">获取验证码</span>
						<div class="clear"></div>
					</div>

					<span class="rt bg_color_blue2 color_white1  longbtn " ng-click="changeTel(1)" id="Span3">确认</span>
					<div class="clear"></div>
				</div>
				<div class="color_black2 bg_color_white1 w98">
					<h3 class="f18 color_black1 bg_color_white1 poptitle border_color_gray1">绑定手机号及修改密码 <span class="close " onclick="pop_func()"></span></h3>
					<div class="popinputcontainer">
						<p class="lt poplabel">手机号:</p>
						<input class="lt border_color_gray1 popinput" type="tel" maxlength="11" id="telpwd" value="188****9436" ng-readonly="mobile!=''" readonly="readonly">
						<div class="clear"></div>
					</div>
					<div class="popinputcontainer">
						<p class="lt poplabel">验证码:</p>
						<input class="lt border_color_gray1 popinput" type="text" id="telpwdcode">
						<span class="bg_color_blue2 color_white1 btngetvcode" id="yzm3" ng-click="GetYzm(3)">获取验证码</span>
						<div class="clear"></div>
					</div>
					<div class=" popinputcontainer">
						<p class="lt poplabel">新密码:</p>
						<input class="lt border_color_gray1 popinput" type="password" id="pwdnew" maxlength="16">
						<div class="clear"></div>
					</div>
					<div class="popinputcontainer">
						<p class="lt poplabel">确认密码:</p>
						<input class="lt border_color_gray1 popinput" type="password" id="cfpwdnew">
						<div class="clear"></div>
					</div>
					<span class="rt bg_color_blue2 color_white1  longbtn " ng-click="changePwd1()" id="btnPwd1">确认</span>
					<div class="clear"></div>
				</div>
			</div>

			<div class="bg_color_white1 tipcontainer ng-scope">
				<div class="lt ring">
					<div class="mor"></div>
				</div>
				<p class="lt color_black2 tiptext">密码修改成功</p>

			</div>
		</div>

		<include file="./themes/simplebootx_wx/Wechat/url.html" />

		<p id="p_copyright" class="footer f14 ng-binding" style="transform-origin: 0px 0px 0px; opacity: 1; transform: scale(1, 1);">
			Copyright @2014-2015 电谷国际酒店<br> All Right Reseved 直订网 技术支持
		</p>
		<div class="mask"></div>
		<div id="div_ajax_start" style="position: fixed; z-index: 999999; text-align: center; width: 100%; height: 100%; top: 0; left: 0; -webkit-transform-origin: 0px 0px 0px; opacity: 1; -webkit-transform: scale(1, 1); background-color: rgba(0,0,0,0.6); display: none">
			<div style="background-color: #f5f1ee; padding: 20px 60px; top: 50%; border-radius: 15px; left: 50%; margin-left: -110px; margin-top: -70px; width: 220px; height: 140px; position: absolute; box-sizing: border-box;">

				<img src="__TMPL__Public/img/loading.gif" style="width: 80%; display: block; margin-left: 10%;">
				<span class="f18" style="margin-top: -10px; color: #454545">努力加载中...</span>
			</div>
		</div>

		<div id="div_ajax_start1" style="position: fixed; z-index: 999999; text-align: center; width: 100%; height: 100%; top: 0px; left: 0px; transform-origin: 0px 0px 0px; opacity: 1; transform: scale(1, 1); display: none; background-color: rgb(245, 241, 238);">
			<div style="padding: 20px 60px; top: 50%; border-radius: 15px; left: 50%; width: 320px; margin-left: -160px; height: 150px; margin-top: -75px; position: absolute; box-sizing: border-box;">

				<img src="__TMPL__Public/img/loading.gif" style="width: 78px; display: block; margin: 0 auto;">
				<span class="f18" style="margin-top: 5px; color: #454545">努力加载中...</span>
			</div>
		</div>
		<div id="resu" style="position: fixed; display: none; border-radius: 5px; background-color: rgba(0,0,0,0.8); height: 36px; line-height: 36px; top: 70%; margin-top: -18px; width: 70%; margin-left: 15%; text-align: center; color: #fff">
			支付失败
		</div>
		
		
		<script src="__TMPL__Public/js/zepto.1.1.6.min.js?v=1.111"></script>
		<script src="__TMPL__Public/js/fastclick.1.0.6.min.js"></script>
		<script src="__TMPL__Public/js/calenda.js?v=4.1"></script>
		<script src="__TMPL__Public/js/require.2.1.20.min.js"></script>
		<script src="__TMPL__Public/js/gong.js"></script>
		<script src="__TMPL__Public/js/jQuery.js"></script>
		<script src="__TMPL__Public/js/amd/require.js"></script>
		<script type="text/javascript">
			window.wxsign={$signJson};
		</script>
		<script type="text/javascript">	
			var VERSION=2016081504;
			requirejs.config({
			    baseUrl: '__TMPL__Public/js',
			    shim: {},
			    paths: {
			        zepto: 'amd/zepto.all',
			        cookie: 'amd/cookie',
			        iDialog:'myDialog/dialog_min',
			        utils:'utils',
			        wxsdk:"wxsdk"
			    },
			    urlArgs: "_="+VERSION
			});
			require(["zepto",'utils','wxsdk'],function($,utils){
				//微信分享
				window.wxsdk.init(false,window.wxsign);
				$(".imguplode").on("tap", function(){
					window.wxsdk.chooseImage(1, function(res){
						$(".imguplode").attr("src", res);
						window.wxsdk.uploadImage(res, function(ppp){
							var imageid = ppp;
							$.post("{:U('User/signsave')}",{imageid:imageid},function(data){
								if(data.success){
									$(".imguplode").attr("src" , data.msg);
								}else{
									alert(data.msg)
								}
							},"json")
						});
					});
				})
			});
		</script>

		<script>
			var popblock = $("#pop");
			var h = popblock.height() / 2;
			var pop = function(val) {
				popblock.children().eq(val).show().siblings().hide();
				$(".mask").fadeIn(100, function() {
					popblock.animate({
						"top": "50%",
						"margin-top": -popblock.height() / 2
					}, 100);
					popblock.find(".close").addClass("is-scaled-up");
					$(document).on("click", ".mask", function() {
						pop_func();
					});
				});
			}
			var pop_func = function() {
				popblock.animate({
					top: -h - 2
				}, 100, function() {
					$("body").removeAttr("style");
					popblock.find(".close").removeClass("is-scaled-up");
					$(".mask").fadeOut(200);
				})
			};
			$(function(){
				$("#btnNick").on("click",function(){
					var nickname = $("#txtNick").val();
					if(nickname == ""){
						alert("修改名称不能为空!");
						return false;
					}
					$.post("{:U('User/nameSave')}",{nickname:nickname},function(data){
						if(data.code == 0){
							alert(data.data);
							window.location.reload();
						}else{
							alert(data.data);
						}
					},"json")
				})
			})
			function check_mobile(val) {
			    var reg = /(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/;
			    if (!reg.test(val)) {
			        return false;
			    } else {
			        return true;
			    }
			}
			$("#yzm0").on("click",function(){
				var txt_tel = $.trim($("#NewPhone").val());
	            $.post("{:U('User/sendVcode1')}",{txt_tel:txt_tel},function(data){
	            	if(data.success == false){
	            		alert(data.message);
	            		return false;
	            	}else{
	            		var _time = 59;
                        var _timefunc = function () {
                            $("#yzm0").html(_time + "秒可重新获取");
                            _time--;
                            if (_time > 0) {
                                setTimeout(_timefunc, 1000);
                            } else {
                                $("#yzm0").html("获取验证码");
                            }
                        }
                        setTimeout(_timefunc, 1000);
		            }
	            },"json")
			})
			$("#yzm1").on("click",function(){
					var txt_tel = $.trim($("#newTel").val());
		            if (!txt_tel) {
						alert("手机号码不能为空");
						return;
		            } else if (!check_mobile(txt_tel)) {
						alert("请输入正确格式的手机号");
						return;
		            }
		            $.post("{:U('User/sendVcode')}",{txt_tel:txt_tel},function(data){
		            	if(data.success == false){
		            		alert(data.message);
		            		return false;
		            	}else{
		            		var _time = 59;
	                        var _timefunc = function () {
	                            $("#yzm1").html(_time + "秒可重新获取");
	                            _time--;
	                            if (_time > 0) {
	                                setTimeout(_timefunc, 1000);
	                            } else {
	                                $("#yzm1").html("获取验证码");
	                            }
	                        }
	                        setTimeout(_timefunc, 1000);
			            }
		            },"json")
				})
		
				$("#btnTel").on("click",function(){
					var txt_tel = $("#newTel").val();
					if (!txt_tel) {
						alert("手机号码不能为空");
						return;
		            } else if (!check_mobile(txt_tel)) {
						alert("请输入正确格式的手机号");
						return;
		            }
		            var txt_yzm = $.trim($("#newyzm").val());
		            if (!txt_yzm) {
						alert("验证码不能为空")
						return;
		            }
		            $.post("{:U('User/phoneSave')}",{txt_tel:txt_tel,txt_yzm:txt_yzm},function(data){
		            	if(data.success == false){
		            		alert(data.message);
		            	}else{
		            		pop_func();
		            	}
		            },"json")
				})
			//$("#style_val").html(decodeURIComponent(style_val));//多色系样式绑定
			$(function() {
				FastClick.attach(document.body);
			});

			/*********ajax等待相关开始*********/
			$(document).on("ajaxStart", function(e, xhr, options) {
				$("#div_ajax_start").attr('stat', 'starting');
				setTimeout(function() {
					if($("#div_ajax_start").attr('stat') == 'starting') {

						$("#div_ajax_start").show();
					}
				}, 10);
			})
			$(document).on("ajaxStop", function(e, xhr, options) {
				setTimeout(function() {
					$("#div_ajax_start").attr('stat', 'stop').hide();

				}, 1000)
			})

			/*********ajax等待相关开始*********/
			$(document).on("ajaxStart1", function() {
				setTimeout(function() {
					$("#div_ajax_start1").show();
				}, 10);
			})
			$(document).on("ajaxStop1", function() {
				setTimeout(function() {
					$("#div_ajax_start1").hide();
				}, 1000)
			})
			var window_width = $(window).width();
			var window_height = $(window).height();
			/*********ajax等待相关结束*********/
		</script>
	

	</body>

</html>